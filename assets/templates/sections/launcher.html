<section-launcher class="messenger__launcher" data-firstOpen="{ state.firstOpen }" data-active="{ state.active }">

        <div class="WD__messenger__items">
            <div class="WD__messenger__item">
                <div class="WD__messenger__item__avatar" style="background-image:url(https://randomuser.me/api/portraits/women/37.jpg)"></div>
                <div class="WD__messenger__item__title">Ирина<span class="WD__messenger__item__title__post">консультант</span></div>
                <div class="WD__messenger__item__body">С удовольствием отвечу на ваши вопросы и подскажу с выбором.</div>
            </div>
        </div>
        <div class="messenger__launcher__form">
            <textarea placeholder="Введите свое сообщение..." class="messenger__launcher__form__textarea" autocomplete=""></textarea>
            <svg class="messenger__launcher__form__buttonSend" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path class="messenger__launcher__form__buttonSend__color" d="M5.1,90.8l7.6-32.9c0.3-1.4,1.5-2.5,3-2.7l42.5-4.4c1.2-0.1,1.2-1.9,0-2.1l-42.5-4.1c-1.5-0.1-2.7-1.2-3-2.6  L5.1,9.2C4.4,6.4,7.4,4.1,10,5.4l83.1,41.6c2.5,1.3,2.5,4.9,0,6.2L10,94.6C7.4,95.9,4.4,93.6,5.1,90.8z"></path></svg>
        </div>
        <div onClick={ onShow } class="messenger__launcher__button">
            <div class="messenger__launcher__badge">2</div>
            <svg class="messenger__launcher__icon" viewBox="0 0 245 287" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <path fill="#ffffff" d=" M 64.13 6.31 C 73.98 1.50 85.84 -0.52 96.36 3.33 C 103.96 6.28 109.23 13.58 110.96 21.40 C 114.55 36.73 111.43 52.92 105.31 67.19 C 98.75 82.43 88.84 96.00 82.61 111.41 C 78.43 122.47 76.17 134.74 78.90 146.42 C 82.15 160.52 92.74 172.65 106.29 177.75 C 113.29 180.73 121.09 181.09 128.57 180.37 C 142.85 178.53 156.02 169.32 162.38 156.36 C 166.93 147.77 168.28 137.64 166.66 128.10 C 164.44 108.62 152.28 92.54 143.65 75.52 C 135.13 59.35 129.89 40.37 133.88 22.13 C 135.37 14.27 140.43 6.92 147.86 3.63 C 158.30 -0.60 170.29 1.36 180.25 5.99 C 209.27 21.53 231.56 49.38 239.74 81.33 C 244.59 99.11 244.56 117.85 242.34 136.03 C 239.51 156.18 232.90 175.88 222.39 193.35 C 211.34 212.30 196.18 228.58 179.40 242.59 C 157.44 260.50 132.53 274.64 106.27 285.21 C 100.21 287.42 93.13 283.07 91.85 276.89 C 90.79 272.79 93.09 268.92 94.37 265.17 C 98.42 253.91 102.79 242.76 106.72 231.46 C 81.03 227.95 56.33 216.42 37.88 198.11 C 21.79 182.76 10.26 162.74 4.91 141.17 C -1.45 116.44 0.60 89.75 10.33 66.17 C 20.69 40.83 40.15 19.43 64.13 6.31 Z" />
            </svg>
            <div class="messenger__launcher__close"></div>
        </div>

<script>

    var $ = this,
    $scope = $$($.root);

    $.state = {
        firstOpen: false,
        active: false
    }

    this.on("mount", function(){
        $.form = $scope.find(".messenger__launcher__form");
        $.textarea = $.form.find(".messenger__launcher__form__textarea");
    });

    $.onShow = function(){
        $.state.firstOpen = !$.state.firstOpen;
        _.onEndTransition($.form[0], function(){
            $.textarea.focus();
        });
    };

</script>

</section-launcher>
